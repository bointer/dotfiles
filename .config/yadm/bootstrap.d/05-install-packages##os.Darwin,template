#! /bin/zsh

set -e

source "$HOME/.zshenv"

# Add Homebrew to PATH (Apple Silicon)
if [[ -x '/opt/homebrew/bin/brew' ]]; then
	eval "$(/opt/homebrew/bin/brew shellenv)"
fi

echo 'Installing Homebrew formulae and casks...'

brew bundle --file "$XDG_CONFIG_HOME/brew/Brewfile.base" --no-lock --no-upgrade

# shellcheck disable=all
{% if yadm.class == "personal" %}
brew bundle --file "$XDG_CONFIG_HOME/brew/Brewfile.personal" --no-lock --no-upgrade
{% endif %}

echo 'Successfully installed Homebrew formulae and casks.'

printf '\n'
